<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.26">

  <title>Robótica 2025 – Robótica</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-bbddfaabaaccfd8a5ddbf403c6be5566.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Robótica</h1>
  <p class="subtitle">Clase 19</p>

<div class="quarto-title-authors">
</div>

  <p class="date">Semana 27 - 29/10/2025</p>
</section>
<section>

<section id="navegación-1" class="slide level2">
<h2>Navegación</h2>
<blockquote>
<p>Área más desafiante en robótica móvil</p>
</blockquote>
<h4 id="pilares"><u>4 pilares</u></h4>
<ul>
<li>Percepción</li>
<li>Localización</li>
<li>Control</li>
<li><mark>Cognición</mark> (o inteligencia)</li>
</ul>
<!-- ######### AGREGAR INFO DE COGNICIÓN PARA ROBÓTICA ######### -->
</section></section>
<section>

<section id="máquinas-de-estado-finito-fsm" class="slide level2 smaller">
<h2>Máquinas de estado finito (<em>fsm</em>)</h2>
<ul>
<li><h4 id="máquina-abstracta-que-consiste-en">Máquina abstracta que consiste en:</h4>
<ul>
<li>Un conjunto de <strong>estados</strong> <span class="math inline">\(S\)</span> (incluyendo uno inicial <span class="math inline">\(s_0\)</span>)</li>
<li>Un <em>alfabeto</em> de posibles <strong>entradas</strong> (<span class="math inline">\(\Sigma\)</span>) <!-- - Un *alfabeto* que sirve como posibles **entradas** a la máquina ($\Sigma$) --></li>
<li>Funciones de <strong>transición</strong> que relacionan un estado con otro para una entrada dada: <span class="math display">\[
s_i \stackrel{c}{\rightarrow} s_j
\]</span> cada transición tiene una condición <span class="math inline">\(c\)</span> que determina cuando se aplica</li>
</ul></li>
</ul>
<blockquote>
<p><u>Salidas</u>: Según el tipo de <em>fsm</em> es que dependen cómo y cuando se producen las salidas</p>
</blockquote>
</section>
<section id="máquinas-de-estado-finito-fsm-1" class="slide level2 smaller">
<h2>Máquinas de estado finito (<em>fsm</em>)</h2>
<blockquote>
<p>Se pueden representar como una cinco-tupla</p>
</blockquote>
<div style=".callout.callout-style-default {text-align: center;}">
<div class="callout callout-note no-icon callout-style-simple">
<div class="callout-body">
<div class="callout-content">
<p><span class="math display">\[
\hspace{18em} \LARGE \left( \Sigma, \Gamma, S, s_0, \delta \right)
\]</span></p>
</div>
</div>
</div>
</div>
<ul>
<li><span class="math inline">\(\Sigma\)</span>: Entradas (conjunto no vacío finito)</li>
<li><span class="math inline">\(\Gamma\)</span>: Salidas</li>
<li><span class="math inline">\(S\)</span>: Estados</li>
<li><span class="math inline">\(s_0 \in S\)</span>: Estado inicial</li>
<li><span class="math inline">\(\delta\)</span>: Funciones de transición <span class="math inline">\(\delta: S \times \Sigma \to S \times \Gamma\)</span></li>
</ul>
</section>
<section id="ejemplo-de-fsm" class="slide level2 smaller">
<h2>Ejemplo de <em>fsm</em></h2>
<blockquote>
<p>Procedimiento de autenticación para un sistema, app, página web, etc.</p>
</blockquote>
<ul>
<li><h4 id="comportamiento"><u>Comportamiento</u></h4>
<ul>
<li>Espera el nombre de usuario y la contraseña</li>
<li>Si los datos son correctos, permite el acceso</li>
<li>Si los datos son incorrectos, muestra un mensaje y vuelve al estado inicial</li>
<li>Si el usuario cierra sesión, vuelve al estado inicial</li>
</ul></li>
</ul>
</section>
<section id="ejemplo-de-fsm-inicio-de-sesión" class="slide level2 smaller">
<h2>Ejemplo de <em>fsm</em>: Inicio de sesión</h2>
<div class="hidden">
<p><span class="math display">\[
\def\sc#1{\dosc#1\csod}
\def\dosc#1#2\csod{{\rm #1{\small #2}}}
\]</span></p>
</div>
<ul>
<li class="fragment"><p>Estados <span class="math display">\[S = \left\{ \sc{ESPERANDO}\sc{CREDENCIALES}, \sc{ACCESO}\sc{PERMITIDO} \right\}\]</span></p></li>
<li class="fragment"><p>Entradas: <span class="math display">\[\Sigma = \left\{ \sc{CREDENCIALES}\sc{VALIDAS}, \sc{CREDENCIALES}\sc{INVALIDAS}, \sc{CERRAR}\sc{SESION} \right\}\]</span></p></li>
<li class="fragment"><p>Salidas: <span class="math display">\[\Gamma = \left\{ \sc{PERMITIR}\sc{ACCESO}, \sc{MENSAJE}\sc{CREDENCIALES}\sc{INVALIDAS},\\ \sc{MENSAJE}\sc{SESION}\sc{CERRADA} \right\}\]</span></p></li>
<li class="fragment"><p>Estado inicial: <span class="math display">\[s_0 = \sc{ESPERANDO}\sc{CREDENCIALES}\]</span></p></li>
<li class="fragment"><p>Funciones de transición: <span class="math inline">\(\delta ?\)</span></p></li>
</ul>
</section>
<section id="ejemplo-de-fsm-inicio-de-sesión-1" class="slide level2 smaller">
<h2>Ejemplo de <em>fsm</em>: Inicio de sesión</h2>
<blockquote>
<p>Tabla de transición y de salida</p>
</blockquote>
<ul>
<li>La función de transición <span class="math inline">\(\delta\)</span> se puede representar mediante una tabla
<ul>
<li>Filas <span class="math inline">\(\to\)</span> Estados <span class="math inline">\(S\)</span></li>
<li>Columnas <span class="math inline">\(\to\)</span> Entradas <span class="math inline">\(\Sigma\)</span></li>
<li>Celda <span class="math inline">\(\to\)</span> Tupla <span class="math inline">\(s,\sigma\)</span> indicando el siguiente estado y la salida</li>
</ul></li>
</ul>
</section>
<section id="ejemplo-de-fsm-inicio-de-sesión-2" class="slide level2 smaller">
<h2>Ejemplo de <em>fsm</em>: Inicio de sesión</h2>
<blockquote>
<p>Tabla de transición y de salida</p>
</blockquote>
<table class="caption-top">
<colgroup>
<col style="width: 20%">
<col style="width: 25%">
<col style="width: 17%">
<col style="width: 36%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th>Credenciales válidas</th>
<th>Credenciales inválidas</th>
<th>Cerrar sesión</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Esperando credenciales</strong></td>
<td>Acceso permitido;<br><u>Permitir acceso</u></td>
<td>Esperando credenciales;<br><u>Mensaje credenciales inválidas</u></td>
<td>-</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Acceso permitido</strong></td>
<td>-</td>
<td>-</td>
<td>Esperando credenciales;<br><u>Mensaje sesión cerrada</u></td>
</tr>
</tbody>
</table>
</section>
<section id="ejemplo-de-fsm-inicio-de-sesión-3" class="slide level2 smaller">
<h2>Ejemplo de <em>fsm</em>: Inicio de sesión</h2>
<ul>
<li>Las máquinas de estado pueden representarse mediante diagramas de estado <!-- (tipo particular de grafo) --></li>
</ul>
<img data-src="index_files/mediabag/fsm1.svg" style="width:100.0%">
</section>
<section id="máquinas-de-estado-finito-1" class="slide level2 smaller">
<h2>Máquinas de estado finito</h2>
<blockquote>
<p>Estados</p>
</blockquote>
<ul>
<li>El estado de un sistema es una <u>condición en un punto particular en el tiempo</u></li>
<li>Afecta a cómo el sistema reacciona a las entradas</li>
<li>Es un <em>“resúmen”</em> del pasado</li>
</ul>
</section>
<section id="máquinas-de-estado-finito-2" class="slide level2 smaller">
<h2>Máquinas de estado finito</h2>
<blockquote>
<p>Transiciones</p>
</blockquote>
<ul>
<li>La definición de una <em>fsm</em> no determina <em>“cuando”</em> evaluar las funciones de transición</li>
<li>Por lo tanto puede <em>reaccionar</em>:
<ul>
<li>Cuando se aplica una entrada ➡️ <strong>disparada por evento</strong></li>
<li>A intervalos regulares ➡️ <strong>disparada por tiempo</strong></li>
</ul></li>
</ul>
<aside class="notes">
<ul>
<li>Nada define <em>“cuando”</em> una <em>fsm</em> debe evaluar las funciones de transición</li>
<li>Al ser un sistema discreto no se menciona explícitamente cuanto tiempo debe pasar entre transiciones</li>
<li>El contexto de operación define cuando deben reaccionar</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="máquinas-de-estado-finito-3" class="slide level2 smaller">
<h2>Máquinas de estado finito</h2>
<ul>
<li><h4 id="dos-tipos-george-mealy-y-edward-moore">Dos tipos: <em>George Mealy</em> y <em>Edward Moore</em></h4></li>
</ul>
<p><br></p>
<blockquote>
<p><strong><em>fsm</em> de tipo Moore</strong>: La salida <u>solo</u> depende del estado actual</p>
</blockquote>
<p><br></p>
<blockquote>
<p><strong><em>fsm</em> de tipo Mealy</strong>: La salida depende del estado actual y la entrada</p>
</blockquote>
</section>
<section id="mealy-vs-moore" class="slide level2 smaller">
<h2>Mealy vs Moore</h2>
<ul>
<li>Cualquier máquina de <em>Moore</em> puede convertirse en una de <em>Mealy</em> equivalente</li>
<li>No siempre una de <em>Mealy</em> puede convertirse en una de <em>Moore</em></li>
<li>Las de tipo <em>Mealy</em> tienden a ser más compactas (menos estados) y la salida es instantánea a la entrada</li>
<li>Las de tipo <em>Moore</em> se utilizan para una salida persistente</li>
</ul>
</section>
</section>
<section>

<section id="máquinas-de-estados-extendidas-1" class="slide level2 smaller">
<h2>Máquinas de estados extendidas</h2>
<ul>
<li><p>La notación se vuelve engorrosa al aumentar la cantidad de estados</p></li>
<li><p>Muchas aplicaciones requiren múltiples fuentes de entrada</p></li>
<li><h4 id="solución-modelo-extendido-de-fsm"><u>Solución</u>: Modelo extendido de <em>fsm</em></h4>
<ul>
<li>Variables de estado interna</li>
<li>Transiciones activadas por expresiones booleanas</li>
<li>Salidas pueden ser llamadas a funciones</li>
</ul></li>
</ul>
</section>

<section id="ejemplo-de-fsm-inicio-de-sesión-v2" class="slide level2 smaller">
<h2>Ejemplo de <em>fsm</em>: Inicio de sesión V2</h2>
<blockquote>
<p><strong><u>Mejora de seguridad</u></strong>: Luego de múltiples intentos fallidos, bloquear la cuenta</p>
</blockquote>
<ul>
<li>Estados</li>
</ul>
<p><span class="math display">\[S = \left\{ \sc{ESPERANDO}\sc{CREDENCIALES}, \sc{ACCESO}\sc{PERMITIDO},\\ \boxed{\sc{CUENTA}\sc{BLOQUEADA}} \right\}\]</span></p>
<ul>
<li><p>Variable interna: <span class="math inline">\(\sc{INTENTOS}\)</span></p></li>
<li><p>Estado inicial: <span class="math display">\[s_0 = \sc{ESPERANDO}\sc{CREDENCIALES}, \sc{INTENTOS} = 0\]</span></p></li>
<li><p>Parámetros: <span class="math inline">\(\sc{MAXIMO}\sc{INTENTOS} = 3\)</span></p></li>
</ul>
</section>
<section id="ejemplo-de-fsm-inicio-de-sesión-v2-1" class="slide level2 smaller">
<h2>Ejemplo de <em>fsm</em>: Inicio de sesión V2</h2>
<div class="columns">
<div class="column" style="width:10%;">
<p><br></p>
</div><div class="column" style="width:75%;">
<img data-src="index_files/mediabag/fsm1-v2.svg" style="width:100.0%">
</div></div>
</section></section>
<section>

<section id="aplicación-de-fsm-a-robótica" class="slide level2 smaller">
<h2>Aplicación de <em>fsm</em> a robótica</h2>
<blockquote>
<p><u>Ejemplo 1</u>: Seguimiento de punto o <em>Point follower</em> (sin obstáculos)</p>
</blockquote>
<div class="columns">
<div class="column">
<div class="hidden">
<p><span class="math inline">\(\require{color}\)</span></p>
</div>
<ul>
<li>Sea una posición y orientación inicial arbitraria del robot <span class="math inline">\(\textcolor{Maroon}{\boldsymbol{P}(t_0)}\)</span></li>
<li>Sea una posición objetivo <span class="math inline">\(\textcolor{Blue}{\boldsymbol{G}}\)</span></li>
<li>Se debe diseñar un algoritmo que mediante una serie de controles <span class="math inline">\(\textcolor{ForestGreen}{\nu(t)}\)</span> y <span class="math inline">\(\textcolor{Orange}{\omega(t)}\)</span> conduzca el robot al punto objetivo</li>
</ul>
</div><div class="column">
<p><img data-src="index_files/mediabag/example1-fig3.svg" style="width:100.0%"></p>
</div></div>
</section>
<section id="ejemplo-1-point-follower" class="slide level2 smaller">
<h2><u>Ejemplo 1</u>: <em>Point follower</em></h2>
<blockquote>
<p>3 posibles casos</p>
</blockquote>
<div class="columns">
<div class="column">
<ol type="1">
<li><u><strong>Caso trivial</strong></u>: el robot se encuentra en el objetivo</li>
</ol>
<p><span class="math display">\[ \textcolor{Maroon}{\boldsymbol{P}} \equiv \textcolor{Blue}{\boldsymbol{G}} \]</span></p>
<ul>
<li>Comandos:</li>
</ul>
<p><span class="math display">\[
\begin{cases}
\textcolor{ForestGreen}{\nu} = 0\\ %\nu = 0\\
\textcolor{Orange}{\omega} = 0 %\omega = 0
\end{cases}
\]</span></p>
</div><div class="column">
<img data-src="index_files/mediabag/example1-fig1.svg" style="width:100.0%">
</div></div>
</section>
<section id="ejemplo-1-point-follower-1" class="slide level2 smaller">
<h2><u>Ejemplo 1</u>: <em>Point follower</em></h2>
<blockquote>
<p>3 posibles casos</p>
</blockquote>
<div class="columns">
<div class="column">
<ol start="2" type="1">
<li><u><strong>Caso sencillo</strong></u>: el eje <span class="math inline">\(\textcolor{Maroon}{\boldsymbol{x}_R}\)</span> del robot apunta al objetivo</li>
</ol>
<p><span class="math display">\[\textcolor{Maroon}{\boldsymbol{\gamma}} = 0\]</span></p>
<ul>
<li>Comandos:</li>
</ul>
<p><span class="math display">\[
\begin{cases}
\textcolor{ForestGreen}{\nu} &gt; 0\\
\textcolor{Orange}{\omega} = 0
\end{cases}
\]</span></p>
</div><div class="column">
<img data-src="index_files/mediabag/example1-fig2.svg" style="width:100.0%">
</div></div>
</section>
<section id="ejemplo-1-point-follower-2" class="slide level2 smaller">
<h2><u>Ejemplo 1</u>: <em>Point follower</em></h2>
<blockquote>
<p>3 posibles casos</p>
</blockquote>
<div class="columns">
<div class="column">
<ol start="3" type="1">
<li><u><strong>Caso general</strong></u>: el eje <span class="math inline">\(\textcolor{Maroon}{\boldsymbol{x}_R}\)</span> del robot <strong>no</strong> apunta al objetivo</li>
</ol>
<p><span class="math display">\[\textcolor{Maroon}{\boldsymbol{\gamma}} \neq 0\]</span></p>
<p><br></p>
<div class="callout callout-caution callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Al ser <strong>no-holonómico</strong>, primero se debe establecer el curso al objetivo</p>
</div>
</div>
</div>
</div><div class="column">
<img data-src="index_files/mediabag/example1-fig3.svg" style="width:100.0%">
</div></div>
</section>
<section id="ejemplo-1-point-follower-3" class="slide level2 smaller">
<h2><u>Ejemplo 1</u>: <em>Point follower</em></h2>
<div class="columns">
<div class="column">
<h4 id="algoritmo">Algoritmo</h4>
<ul>
<li class="fragment"><u>Paso 1</u>: El curso es lo suficientemente bueno?
<ul>
<li class="fragment">✔️ Continuar al paso 2</li>
<li class="fragment">❌ Enderezar</li>
</ul></li>
<li class="fragment"><u>Paso 2</u>: Está cercano al punto?
<ul>
<li class="fragment">✔️ Finalizar</li>
<li class="fragment">❌ Avanzar</li>
</ul></li>
</ul>
</div><div class="column">
<p><br></p>
<p><img data-src="index_files/mediabag/example1-fig3.svg" style="width:100.0%"></p>
</div></div>
</section>
<section id="point-follower-con-fsm" class="slide level2 smaller">
<h2><em>Point-follower</em> con <em>fsm</em></h2>
<blockquote>
<p>Identificar los <em>componentes</em> de la máquina</p>
</blockquote>
<div class="columns">
<div class="column">
<ul>
<li class="fragment"><p>Estados: <span class="math inline">\(S = \left\{ \textrm{Girar}, \textrm{Avanzar} \right\}\)</span></p></li>
<li class="fragment"><p>Entradas: <span class="math inline">\(\Sigma = \left\{ \boldsymbol{P}, \theta \right\}\)</span></p></li>
<li class="fragment"><p>Salidas: <span class="math inline">\(\Gamma = \left\{ \nu, \omega \right\}\)</span></p></li>
<li class="fragment"><p>Parámetro: <span class="math inline">\(\boldsymbol{G}\)</span></p></li>
<li class="fragment"><p>Variable: <span class="math inline">\(\gamma\)</span></p></li>
<li class="fragment"><p>Estado inicial: <span class="math inline">\(s_0 = \textrm{Girar}\)</span></p></li>
<li class="fragment"><p>Funciones de transición: <span class="math inline">\(\delta ?\)</span></p></li>
</ul>
</div><div class="column">
<p><img data-src="index_files/mediabag/example1-fig3.svg" style="width:100.0%"></p>
</div></div>
</section>
<section id="point-follower-con-fsm-1" class="slide level2 smaller">
<h2><em>Point-follower</em> con <em>fsm</em></h2>
<blockquote>
<p>Tabla de transición y de salida</p>
</blockquote>
<div class="fragment">
<table class="table-hover table-bordered caption-top">
<colgroup>
<col style="width: 10%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;"><span class="math inline">\(\gamma &lt; 0\)</span></th>
<th style="text-align: center;"><span class="math inline">\(\gamma = 0\)</span></th>
<th style="text-align: center;"><span class="math inline">\(\gamma &gt; 0\)</span></th>
<th style="text-align: center;"><span class="math inline">\(\lVert \boldsymbol{P} - \boldsymbol{G} \rVert \neq 0\)</span></th>
<th style="text-align: center;"><span class="math inline">\(\lVert \boldsymbol{P} - \boldsymbol{G} \rVert = 0\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Girar</strong></td>
<td style="text-align: center;">Girar<br><span class="math display">\[\nu = 0\\ \omega &lt; 0\]</span></td>
<td style="text-align: center;">Avanzar<br><span class="math display">\[\nu = 0\\ \omega = 0\]</span></td>
<td style="text-align: center;">Girar<br><span class="math display">\[\nu = 0\\ \omega &gt; 0\]</span></td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Avanzar</strong></td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Avanzar<br><span class="math display">\[\nu &gt; 0\\ \omega = 0\]</span></td>
<td style="text-align: center;">Avanzar<br><span class="math display">\[\nu = 0\\ \omega = 0\]</span></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="point-follower-con-fsm-2" class="slide level2 smaller">
<h2><em>Point-follower</em> con <em>fsm</em></h2>
<blockquote>
<p>Máquina de estado de tipo <em>Mealy</em></p>
</blockquote>
<div class="columns">
<div class="column" style="width:15%;">
<p><br></p>
</div><div class="column" style="width:70%;">
<img data-src="index_files/mediabag/fsm-point-follower-mealy.svg" style="width:100.0%">
</div></div>
</section>
<section id="point-follower-con-fsm-3" class="slide level2 smaller">
<h2><em>Point-follower</em> con <em>fsm</em></h2>
<blockquote>
<p>Máquina de estado de tipo <em>Moore</em></p>
</blockquote>
<div class="columns">
<div class="column" style="width:20%;">
<p><br></p>
</div><div class="column" style="width:70%;">
<img data-src="index_files/mediabag/fsm-point-follower-moore.svg" style="width:80.0%">
</div></div>
</section>
<section id="point-follower-con-fsm-4" class="slide level2 smaller">
<h2><em>Point-follower</em> con <em>fsm</em></h2>
<div class="columns">
<div class="column" style="width:45%;">
<blockquote>
<p>Implementación <em>fsm</em> tipo <em>Moore</em></p>
</blockquote>
<ul>
<li><p>Las transiciones y las salidas son independientes</p></li>
<li><p>La función de control aplica los comandos según la variable <code>state</code>:</p>
<ul>
<li><code>0</code>: Girar a izquierda</li>
<li><code>1</code>: Girar a derecha</li>
<li><code>2</code>: Avanzar</li>
<li><code>3</code>: Finalizar</li>
</ul></li>
</ul>
</div><div class="column" style="width:55%;">
<div class="sourceCode" id="cb1" data-code-line-numbers="|8-11|14-18|19-22|23-26|27-34|35-37|39"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb1-1"><a></a><span class="kw">class</span> GoToPoint(Node):</span>
<span id="cb1-2"><a></a>  <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb1-3"><a></a>    <span class="co">#...</span></span>
<span id="cb1-4"><a></a>    <span class="co"># Creación del publisher</span></span>
<span id="cb1-5"><a></a>    <span class="va">self</span>.pub <span class="op">=</span> <span class="va">self</span>.create_publisher(</span>
<span id="cb1-6"><a></a>        Twist, <span class="st">'cmd_vel'</span>, <span class="dv">10</span>)</span>
<span id="cb1-7"><a></a>    </span>
<span id="cb1-8"><a></a>    <span class="co"># Creación del timer</span></span>
<span id="cb1-9"><a></a>    <span class="va">self</span>.timer <span class="op">=</span> <span class="va">self</span>.create_timer(</span>
<span id="cb1-10"><a></a>        <span class="fl">0.1</span>, <span class="va">self</span>.timer_callback)</span>
<span id="cb1-11"><a></a>    <span class="va">self</span>.state <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb1-12"><a></a>    <span class="va">self</span>.msg <span class="op">=</span> Twist()</span>
<span id="cb1-13"><a></a></span>
<span id="cb1-14"><a></a>  <span class="kw">def</span> timer_callback(<span class="va">self</span>):        </span>
<span id="cb1-15"><a></a>    <span class="cf">if</span> <span class="va">self</span>.state <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb1-16"><a></a>      <span class="co"># Corregir curso izquierda</span></span>
<span id="cb1-17"><a></a>      <span class="va">self</span>.msg.linear.x <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb1-18"><a></a>      <span class="va">self</span>.msg.angular.z <span class="op">=</span> np.pi<span class="op">/</span><span class="dv">4</span></span>
<span id="cb1-19"><a></a>    <span class="cf">elif</span> <span class="va">self</span>.state <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb1-20"><a></a>      <span class="co"># Corregir curso derecha</span></span>
<span id="cb1-21"><a></a>      <span class="va">self</span>.msg.linear.x <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb1-22"><a></a>      <span class="va">self</span>.msg.angular.z <span class="op">=</span> <span class="op">-</span>np.pi<span class="op">/</span><span class="dv">4</span></span>
<span id="cb1-23"><a></a>    <span class="cf">elif</span> <span class="va">self</span>.state <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb1-24"><a></a>      <span class="co"># Avanzar</span></span>
<span id="cb1-25"><a></a>      <span class="va">self</span>.msg.linear.x <span class="op">=</span> <span class="fl">0.25</span></span>
<span id="cb1-26"><a></a>      <span class="va">self</span>.msg.angular.z <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb1-27"><a></a>    <span class="cf">elif</span> <span class="va">self</span>.state <span class="op">==</span> <span class="dv">3</span>:</span>
<span id="cb1-28"><a></a>      <span class="co"># Finalizar</span></span>
<span id="cb1-29"><a></a>      <span class="co"># Publicar un comando de Twist para detenerse</span></span>
<span id="cb1-30"><a></a>      <span class="va">self</span>.pub.publish(Twist())</span>
<span id="cb1-31"><a></a>      <span class="va">self</span>.get_logger().info(<span class="st">"Done"</span>)</span>
<span id="cb1-32"><a></a>      <span class="co"># Terminar la ejecución</span></span>
<span id="cb1-33"><a></a>      <span class="va">self</span>.destroy_node()</span>
<span id="cb1-34"><a></a>      <span class="cf">raise</span> <span class="pp">SystemExit</span></span>
<span id="cb1-35"><a></a>    <span class="cf">else</span>:</span>
<span id="cb1-36"><a></a>      <span class="va">self</span>.msg <span class="op">=</span> Twist()</span>
<span id="cb1-37"><a></a>      <span class="va">self</span>.get_logger().error(<span class="st">"Estado desconocido"</span>)</span>
<span id="cb1-38"><a></a>  </span>
<span id="cb1-39"><a></a>  <span class="va">self</span>.pub.publish(<span class="va">self</span>.msg)</span></code></pre></div>
</div></div>
</section>
<section id="point-follower-con-fsm-5" class="slide level2 smaller">
<h2><em>Point-follower</em> con <em>fsm</em></h2>
<div class="columns">
<div class="column" style="width:45%;">
<ul>
<li>Antes de continuar será necesario definir las comparaciones por <span class="math inline">\(\approx\)</span> y <span class="math inline">\(\not\approx\)</span></li>
<li>Se introducen dos parámetros:
<ul>
<li>Tolerancia angular: <span class="math inline">\(\epsilon_\theta\)</span></li>
<li>Tolerancia posicional: <span class="math inline">\(\epsilon_\boldsymbol{P}\)</span></li>
</ul></li>
</ul>
<p><span class="math display">\[
\gamma \approx 0 \to |\gamma| &lt; \epsilon_\theta\\
\gamma \not\approx 0 \to |\gamma| &gt; \epsilon_\theta\\
\]</span></p>
<p><span class="math display">\[
\lVert \boldsymbol{P} - \boldsymbol{G} \rVert \approx 0 \to \lVert \boldsymbol{P} - \boldsymbol{G} \rVert &lt; \epsilon_\boldsymbol{P}\\
\lVert \boldsymbol{P} - \boldsymbol{G} \rVert \not\approx 0 \to \lVert \boldsymbol{P} - \boldsymbol{G} \rVert &gt; \epsilon_\boldsymbol{P}
\]</span></p>
</div><div class="column" style="width:5%;">
<p><br></p>
</div><div class="column" style="width:50%;">
<img data-src="index_files/mediabag/fsm-point-follower-moore-v2.svg" style="width:100.0%">
</div></div>
</section>
<section id="point-follower-con-fsm-6" class="slide level2 smaller">
<h2><em>Point-follower</em> con <em>fsm</em></h2>
<div class="columns">
<div class="column" style="width:45%;">
<blockquote>
<p>Implementación</p>
</blockquote>
<ul>
<li>La función de transición depende solo de la posición y orientación del robot</li>
<li>Por lo tanto las transiciones se pueden implementar en el callback de <code>odom</code></li>
</ul>
</div><div class="column" style="width:55%;">
<div class="sourceCode" id="cb2" data-code-line-numbers="|2-3|4-7|9-12|14-26|28-33"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb2-1"><a></a><span class="kw">def</span> sub_callback(<span class="va">self</span>, msg: Odometry):</span>
<span id="cb2-2"><a></a>    <span class="co"># Obtener la posición y la orientación del robot</span></span>
<span id="cb2-3"><a></a>    x, y, theta <span class="op">=</span> <span class="co">#...</span></span>
<span id="cb2-4"><a></a>    <span class="co"># Calculo del error respecto del objetivo</span></span>
<span id="cb2-5"><a></a>    e_x <span class="op">=</span> <span class="va">self</span>.x_goal <span class="op">-</span> x</span>
<span id="cb2-6"><a></a>    e_y <span class="op">=</span> <span class="va">self</span>.y_goal <span class="op">-</span> y</span>
<span id="cb2-7"><a></a>    e_pos <span class="op">=</span> np.hypot(e_x, e_y)</span>
<span id="cb2-8"><a></a>    </span>
<span id="cb2-9"><a></a>    theta_d <span class="op">=</span> np.arctan2(e_y, e_x)</span>
<span id="cb2-10"><a></a>    <span class="co"># Corregir discontinuidad de arctan2(.)</span></span>
<span id="cb2-11"><a></a>    <span class="co"># ...</span></span>
<span id="cb2-12"><a></a>    e_theta <span class="op">=</span> theta_d <span class="op">-</span> theta</span>
<span id="cb2-13"><a></a></span>
<span id="cb2-14"><a></a>    <span class="co">### TRANSICIONES</span></span>
<span id="cb2-15"><a></a>    <span class="cf">if</span> np.<span class="bu">abs</span>(e_theta) <span class="op">&gt;</span> <span class="va">self</span>.angular_tolerance <span class="op">\</span></span>
<span id="cb2-16"><a></a>      <span class="kw">and</span> e_theta <span class="op">&gt;</span> <span class="fl">0.0</span>:</span>
<span id="cb2-17"><a></a>        <span class="va">self</span>.cambiar_estado(<span class="dv">0</span>)</span>
<span id="cb2-18"><a></a>    <span class="cf">elif</span> np.<span class="bu">abs</span>(e_theta) <span class="op">&gt;</span> <span class="va">self</span>.angular_tolerance <span class="op">\</span></span>
<span id="cb2-19"><a></a>      <span class="kw">and</span> e_theta <span class="op">&lt;</span> <span class="fl">0.0</span>:</span>
<span id="cb2-20"><a></a>        <span class="va">self</span>.cambiar_estado(<span class="dv">1</span>)</span>
<span id="cb2-21"><a></a>    <span class="cf">elif</span> np.<span class="bu">abs</span>(e_theta) <span class="op">&lt;=</span> <span class="va">self</span>.angular_tolerance <span class="op">\</span></span>
<span id="cb2-22"><a></a>      <span class="kw">and</span> e_pos <span class="op">&gt;</span> <span class="va">self</span>.goal_tolerance:</span>
<span id="cb2-23"><a></a>        <span class="va">self</span>.cambiar_estado(<span class="dv">2</span>)</span>
<span id="cb2-24"><a></a>    <span class="cf">elif</span> np.<span class="bu">abs</span>(e_theta) <span class="op">&lt;=</span> <span class="va">self</span>.angular_tolerance <span class="op">\</span></span>
<span id="cb2-25"><a></a>      <span class="kw">and</span> e_pos <span class="op">&lt;=</span> <span class="va">self</span>.goal_tolerance:</span>
<span id="cb2-26"><a></a>        <span class="va">self</span>.cambiar_estado(<span class="dv">3</span>)</span>
<span id="cb2-27"><a></a></span>
<span id="cb2-28"><a></a><span class="kw">def</span> cambiar_estado(<span class="va">self</span>, nuevo_estado):</span>
<span id="cb2-29"><a></a>    <span class="cf">if</span> <span class="va">self</span>.state <span class="op">!=</span> nuevo_estado:</span>
<span id="cb2-30"><a></a>        <span class="va">self</span>.state <span class="op">=</span> nuevo_estado</span>
<span id="cb2-31"><a></a></span>
<span id="cb2-32"><a></a>        <span class="va">self</span>.get_logger().info(<span class="ss">f"Cambio de estado </span><span class="op">\</span></span>
<span id="cb2-33"><a></a><span class="ss">            </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>state<span class="sc">}</span><span class="ss"> -&gt; </span><span class="sc">{</span>nuevo_estado<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
</div></div>
</section></section>
<section>

<section id="aplicación-de-fsm-a-robótica-1" class="slide level2 smaller">
<h2>Aplicación de <em>fsm</em> a robótica</h2>
<blockquote>
<p><u>Ejemplo 2</u>: Seguidor de obstáculo o <em>Wall follower</em></p>
</blockquote>
<div class="columns">
<div class="column">
<ul>
<li><strong>Objetivo</strong>: Dada una pared (u obstáculo), recorrer el perímetro siempre hacia el mismo lado</li>
<li>Requiere un tipo de sensor de proximidad, se utilizará el de tipo <em>LIDAR</em></li>
</ul>
</div><div class="column">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="wall-follower.png" class="quarto-figure quarto-figure-center" style="width:80.0%"></p>
</figure>
</div>
</div></div>
</section>
<section id="ejemplo-2-wall-follower" class="slide level2 smaller">
<h2><u>Ejemplo 2</u>: <em>Wall follower</em></h2>
<h4 id="algoritmo-1">Algoritmo</h4>
<ul>
<li class="fragment"><u>Paso 1</u>: Hay una pared u obstáculo al frente?
<ul>
<li class="fragment">✔️ Continuar al paso 2</li>
<li class="fragment">❌ Buscar la pared u obstáculo (girar a la izquierda)</li>
</ul></li>
<li class="fragment"><u>Paso 2</u>: La pared u obstáculo está a la derecha?
<ul>
<li class="fragment">✔️ Continuar al paso 3</li>
<li class="fragment">❌ Hay una pared u obstáculo al frente?
<ul>
<li class="fragment">✔️ Girar a la izquierda (para que la pared u obstáculo quede a la derecha)</li>
<li class="fragment">❌ Volver al paso 1</li>
</ul></li>
</ul></li>
<li class="fragment"><u>Paso 3</u>: El obstáculo sigue a la derecha?
<ul>
<li class="fragment">✔️ Avanzar</li>
<li class="fragment">❌ Volver al paso 2</li>
</ul></li>
</ul>
</section>
<section id="ejemplo-2-wall-follower-1" class="slide level2 smaller">
<h2><u>Ejemplo 2</u>: <em>Wall follower</em></h2>
<blockquote>
<p>Detección de obstáculos con <em>LIDAR</em></p>
</blockquote>
<div class="columns">
<div class="column">
<ul>
<li>Implementación simple: dividir la rotación completa en zonas</li>
<li>Por cada zona obtener la mínima medición</li>
<li>Comparar el valor con un umbral definido</li>
</ul>
</div><div class="column">
<img data-src="index_files/mediabag/lidar-implementation.svg" style="width:100.0%">
</div></div>
</section>
<section id="wall-follower-con-fsm" class="slide level2 smaller">
<h2><em>Wall-follower</em> con <em>fsm</em></h2>
<blockquote>
<p>Identificar los <em>componentes</em> de la máquina</p>
</blockquote>
<ul>
<li class="fragment"><p>Estados: <span class="math inline">\(S = \left\{ \textrm{BuscarObstaculo}, \textrm{GirarIzquierda}, \textrm{Avanzar} \right\}\)</span></p></li>
<li class="fragment"><p>Entradas: <span class="math inline">\(\Sigma = \left\{  R_\textrm{F}, R_\textrm{FL}, R_\textrm{FR} \right\}\)</span></p></li>
<li class="fragment"><p>Salidas: <span class="math inline">\(\Gamma = \left\{ \nu, \omega \right\}\)</span></p></li>
<li class="fragment"><p>Parámetro: <span class="math inline">\(d = \textrm{DistanciaPared}\)</span></p></li>
<li class="fragment"><p>Estado inicial: <span class="math inline">\(s_0 = \textrm{BuscarObstaculo}\)</span></p></li>
<li class="fragment"><p>Funciones de transición: <span class="math inline">\(\delta ?\)</span></p></li>
</ul>
</section>
<section id="wall-follower-con-fsm-1" class="slide level2 smaller">
<h2><em>Wall-follower</em> con <em>fsm</em></h2>
<div class="hidden">
<p><span class="math display">\[
\require{color}
\def\obstacle{\textcolor{Maroon}{\boldsymbol{&lt;}}}
\]</span></p>
</div>
<blockquote>
<p>Tabla de condiciones</p>
</blockquote>
<table class="caption-top">
<colgroup>
<col style="width: 26%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;"><span class="math inline">\(R_\textrm{F} \stackrel{?}{\lessgtr} d\)</span></th>
<th style="text-align: center;"><span class="math inline">\(R_\textrm{FL} \stackrel{?}{\lessgtr} d\)</span></th>
<th style="text-align: center;"><span class="math inline">\(R_\textrm{FR} \stackrel{?}{\lessgtr} d\)</span></th>
<th style="text-align: left;">Siguiente estado</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Sin obstáculos</td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: left;"><strong>Buscar Obstáculo</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;">Al frente</td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: left;"><strong>Girar Izquierda</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left;">A izquierda</td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: left;"><strong>Buscar Obstáculo</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;">A derecha</td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: left;"><strong>Avanzar</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Al frente e izquierda</td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: left;"><strong>Girar Izquierda</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;">Al frente y derecha</td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: left;"><strong>Girar Izquierda</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left;">A izquierda y derecha</td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: left;"><strong>Buscar Obstáculo</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;">Frente, izquierda y derecha</td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: left;"><strong>Girar Izquierda</strong></td>
</tr>
</tbody>
</table>
</section>
<section id="wall-follower-con-fsm-2" class="slide level2 smaller">
<h2><em>Wall-follower</em> con <em>fsm</em></h2>
<blockquote>
<p>Tabla de condiciones</p>
</blockquote>
<table class="caption-top">
<colgroup>
<col style="width: 26%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;"><span class="math inline">\(R_\textrm{F} \stackrel{?}{\lessgtr} d\)</span></th>
<th style="text-align: center;"><span class="math inline">\(R_\textrm{FL} \stackrel{?}{\lessgtr} d\)</span></th>
<th style="text-align: center;"><span class="math inline">\(R_\textrm{FR} \stackrel{?}{\lessgtr} d\)</span></th>
<th style="text-align: left;">Siguiente estado</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Sin obstáculos</td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: left;"><strong>Buscar Obstáculo</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;">Al frente</td>
<td style="text-align: center;"><mark><span class="math inline">\(\obstacle\)</span></mark></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: left;"><mark><strong>Girar Izquierda</strong></mark></td>
</tr>
<tr class="odd">
<td style="text-align: left;">A izquierda</td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: left;"><strong>Buscar Obstáculo</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;">A derecha</td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: left;"><strong>Avanzar</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Al frente e izquierda</td>
<td style="text-align: center;"><mark><span class="math inline">\(\obstacle\)</span></mark></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: left;"><mark><strong>Girar Izquierda</strong></mark></td>
</tr>
<tr class="even">
<td style="text-align: left;">Al frente y derecha</td>
<td style="text-align: center;"><mark><span class="math inline">\(\obstacle\)</span></mark></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: left;"><mark><strong>Girar Izquierda</strong></mark></td>
</tr>
<tr class="odd">
<td style="text-align: left;">A izquierda y derecha</td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: left;"><strong>Buscar Obstáculo</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;">Frente, izquierda y derecha</td>
<td style="text-align: center;"><mark><span class="math inline">\(\obstacle\)</span></mark></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: left;"><mark><strong>Girar Izquierda</strong></mark></td>
</tr>
</tbody>
</table>
</section>
<section id="wall-follower-con-fsm-3" class="slide level2 smaller">
<h2><em>Wall-follower</em> con <em>fsm</em></h2>
<blockquote>
<p>Tabla de transición</p>
</blockquote>
<table class="table-hover table-bordered caption-top" style="width:60%;">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;"><span class="math display">\[R_\textrm{F} &lt; d\]</span></th>
<th style="text-align: center;"><span class="math inline">\(\dots\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Buscar Obstáculo</strong></td>
<td style="text-align: center;">Girar Izquierda</td>
<td style="text-align: center;"><span class="math inline">\(\dots\)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Girar Izquierda</strong></td>
<td style="text-align: center;">Girar Izquierda</td>
<td style="text-align: center;"><span class="math inline">\(\dots\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Avanzar</strong></td>
<td style="text-align: center;">Girar Izquierda</td>
<td style="text-align: center;"><span class="math inline">\(\dots\)</span></td>
</tr>
</tbody>
</table>
</section>
<section id="wall-follower-con-fsm-4" class="slide level2 smaller">
<h2><em>Wall-follower</em> con <em>fsm</em></h2>
<blockquote>
<p>Tabla de condiciones</p>
</blockquote>
<table class="caption-top">
<colgroup>
<col style="width: 26%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;"><span class="math inline">\(R_\textrm{F} \stackrel{?}{\lessgtr} d\)</span></th>
<th style="text-align: center;"><span class="math inline">\(R_\textrm{FL} \stackrel{?}{\lessgtr} d\)</span></th>
<th style="text-align: center;"><span class="math inline">\(R_\textrm{FR} \stackrel{?}{\lessgtr} d\)</span></th>
<th style="text-align: left;">Siguiente estado</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Sin obstáculos</td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: left;"><strong>Buscar Obstáculo</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;">A izquierda</td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: left;"><strong>Buscar Obstáculo</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left;">A derecha</td>
<td style="text-align: center;"><mark><span class="math inline">\(&gt;\)</span></mark></td>
<td style="text-align: center;"><mark><span class="math inline">\(&gt;\)</span></mark></td>
<td style="text-align: center;"><mark><span class="math inline">\(\obstacle\)</span></mark></td>
<td style="text-align: left;"><mark><strong>Avanzar</strong></mark></td>
</tr>
<tr class="even">
<td style="text-align: left;">A izquierda y derecha</td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: left;"><strong>Buscar Obstáculo</strong></td>
</tr>
</tbody>
</table>
<div class="fragment">
<table class="table-hover table-bordered caption-top" style="width:90%;">
<colgroup>
<col style="width: 30%">
<col style="width: 30%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;"><span class="math display">\[R_\textrm{F} &lt; d\]</span></th>
<th style="text-align: center;"><span class="math display">\[R_\textrm{F} &gt; d \wedge R_\textrm{FL} &gt; d \wedge R_\textrm{FR} &lt; d\]</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Buscar Obstáculo</strong></td>
<td style="text-align: center;">Girar Izquierda</td>
<td style="text-align: center;">Avanzar</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Girar Izquierda</strong></td>
<td style="text-align: center;">Girar Izquierda</td>
<td style="text-align: center;">Avanzar</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Avanzar</strong></td>
<td style="text-align: center;">Girar Izquierda</td>
<td style="text-align: center;">Avanzar</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="wall-follower-con-fsm-5" class="slide level2 smaller">
<h2><em>Wall-follower</em> con <em>fsm</em></h2>
<blockquote>
<p>Tabla de condiciones</p>
</blockquote>
<table class="caption-top">
<colgroup>
<col style="width: 26%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;"><span class="math inline">\(R_\textrm{F} \stackrel{?}{\lessgtr} d\)</span></th>
<th style="text-align: center;"><span class="math inline">\(R_\textrm{FL} \stackrel{?}{\lessgtr} d\)</span></th>
<th style="text-align: center;"><span class="math inline">\(R_\textrm{FR} \stackrel{?}{\lessgtr} d\)</span></th>
<th style="text-align: left;">Siguiente estado</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Sin obstáculos</td>
<td style="text-align: center;"><mark><span class="math inline">\(&gt;\)</span></mark></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><mark><span class="math inline">\(&gt;\)</span></mark></td>
<td style="text-align: left;"><mark><strong>Buscar Obstáculo</strong></mark></td>
</tr>
<tr class="even">
<td style="text-align: left;">A izquierda</td>
<td style="text-align: center;"><mark><span class="math inline">\(&gt;\)</span></mark></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: center;"><mark><span class="math inline">\(&gt;\)</span></mark></td>
<td style="text-align: left;"><mark><strong>Buscar Obstáculo</strong></mark></td>
</tr>
<tr class="odd">
<td style="text-align: left;">A derecha</td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\obstacle\)</span></td>
<td style="text-align: left;"><strong>Avanzar</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;">A izquierda y derecha</td>
<td style="text-align: center;"><mark><span class="math inline">\(&gt;\)</span></mark></td>
<td style="text-align: center;"><mark><span class="math inline">\(\obstacle\)</span></mark></td>
<td style="text-align: center;"><mark><span class="math inline">\(\obstacle\)</span></mark></td>
<td style="text-align: left;"><mark><strong>Buscar Obstáculo</strong></mark></td>
</tr>
</tbody>
</table>
<table class="table-hover table-bordered caption-top" style="width:90%;">
<colgroup>
<col style="width: 30%">
<col style="width: 30%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;"><span class="math display">\[R_\textrm{F} &lt; d\]</span></th>
<th style="text-align: center;"><span class="math display">\[R_\textrm{F} &gt; d \wedge R_\textrm{FL} &gt; d \wedge R_\textrm{FR} &lt; d\]</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Buscar Obstáculo</strong></td>
<td style="text-align: center;">Girar Izquierda</td>
<td style="text-align: center;">Avanzar</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Girar Izquierda</strong></td>
<td style="text-align: center;">Girar Izquierda</td>
<td style="text-align: center;">Avanzar</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Avanzar</strong></td>
<td style="text-align: center;">Girar Izquierda</td>
<td style="text-align: center;">Avanzar</td>
</tr>
</tbody>
</table>
</section>
<section id="wall-follower-con-fsm-6" class="slide level2 smaller">
<h2><em>Wall-follower</em> con <em>fsm</em></h2>
<blockquote>
<p>Tabla de transición</p>
</blockquote>
<table class="table-hover table-bordered caption-top">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;"><span class="math display">\[R_\textrm{F} &lt; d\]</span></th>
<th style="text-align: center;"><span class="math display">\[R_\textrm{F} &gt; d \\ R_\textrm{FL} &gt; d \\ R_\textrm{FR} &lt; d\]</span></th>
<th style="text-align: center;"><span class="math display">\[R_\textrm{F} &gt; d \wedge R_\textrm{FL} &lt; d \wedge R_\textrm{FR} &lt; d\\R_\textrm{F} &gt; d \wedge R_\textrm{FR} &gt; d\]</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Buscar Obstáculo</strong></td>
<td style="text-align: center;">Girar Izquierda</td>
<td style="text-align: center;">Avanzar</td>
<td style="text-align: center;">Buscar Obstáculo</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Girar Izquierda</strong></td>
<td style="text-align: center;">Girar Izquierda</td>
<td style="text-align: center;">Avanzar</td>
<td style="text-align: center;">Buscar Obstáculo</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Avanzar</strong></td>
<td style="text-align: center;">Girar Izquierda</td>
<td style="text-align: center;">Avanzar</td>
<td style="text-align: center;">Buscar Obstáculo</td>
</tr>
</tbody>
</table>
</section>
<section id="wall-follower-con-fsm-7" class="slide level2 smaller">
<h2><em>Wall-follower</em> con <em>fsm</em></h2>
<blockquote>
<p>Máquina de estado de tipo <em>Moore</em></p>
</blockquote>
<div class="columns">
<div class="column" style="width:20%;">
<p><br></p>
</div><div class="column" style="width:70%;">
<img data-src="index_files/mediabag/fsm-wall-follower-moore.svg" style="width:100.0%">
</div></div>
</section>
<section id="wall-follower-con-fsm-8" class="slide level2 smaller">
<h2><em>Wall-follower</em> con <em>fsm</em></h2>
<div class="columns">
<div class="column" style="width:45%;">
<blockquote>
<p>Implementación <em>fsm</em> tipo <em>Moore</em></p>
</blockquote>
<ul>
<li><p>Las transiciones y las salidas son independientes</p></li>
<li><p>La función de control aplica los comandos según la variable <code>state</code>:</p>
<ul>
<li><code>0</code>: Buscar obstáculo</li>
<li><code>1</code>: Girar a izquierda</li>
<li><code>2</code>: Avanzar</li>
</ul></li>
</ul>
</div><div class="column" style="width:55%;">
<div class="sourceCode" id="cb3" data-code-line-numbers="|8-11|14-18|19-22|23-26|27-29|31"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb3-1"><a></a><span class="kw">class</span> GoToPoint(Node):</span>
<span id="cb3-2"><a></a>  <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb3-3"><a></a>    <span class="co">#...</span></span>
<span id="cb3-4"><a></a>    <span class="co"># Creación del publisher</span></span>
<span id="cb3-5"><a></a>    <span class="va">self</span>.pub <span class="op">=</span> <span class="va">self</span>.create_publisher(</span>
<span id="cb3-6"><a></a>        Twist, <span class="st">'cmd_vel'</span>, <span class="dv">10</span>)</span>
<span id="cb3-7"><a></a>    </span>
<span id="cb3-8"><a></a>    <span class="co"># Creación del timer</span></span>
<span id="cb3-9"><a></a>    <span class="va">self</span>.timer <span class="op">=</span> <span class="va">self</span>.create_timer(</span>
<span id="cb3-10"><a></a>        <span class="fl">0.1</span>, <span class="va">self</span>.timer_callback)</span>
<span id="cb3-11"><a></a>    <span class="va">self</span>.state <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-12"><a></a>    <span class="va">self</span>.msg <span class="op">=</span> Twist()</span>
<span id="cb3-13"><a></a></span>
<span id="cb3-14"><a></a>  <span class="kw">def</span> timer_callback(<span class="va">self</span>):        </span>
<span id="cb3-15"><a></a>    <span class="cf">if</span> <span class="va">self</span>.state <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb3-16"><a></a>      <span class="co"># Buscar obstáculo</span></span>
<span id="cb3-17"><a></a>      <span class="va">self</span>.msg.linear.x <span class="op">=</span> <span class="fl">0.2</span></span>
<span id="cb3-18"><a></a>      <span class="va">self</span>.msg.angular.z <span class="op">=</span> <span class="op">-</span>np.pi<span class="op">/</span><span class="dv">4</span></span>
<span id="cb3-19"><a></a>    <span class="cf">elif</span> <span class="va">self</span>.state <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb3-20"><a></a>      <span class="co"># Girar a izquierda</span></span>
<span id="cb3-21"><a></a>      <span class="va">self</span>.msg.linear.x <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb3-22"><a></a>      <span class="va">self</span>.msg.angular.z <span class="op">=</span> np.pi<span class="op">/</span><span class="dv">4</span></span>
<span id="cb3-23"><a></a>    <span class="cf">elif</span> <span class="va">self</span>.state <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb3-24"><a></a>      <span class="co"># Avanzar</span></span>
<span id="cb3-25"><a></a>      <span class="va">self</span>.msg.linear.x <span class="op">=</span> <span class="fl">0.25</span></span>
<span id="cb3-26"><a></a>      <span class="va">self</span>.msg.angular.z <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb3-27"><a></a>    <span class="cf">else</span>:</span>
<span id="cb3-28"><a></a>      <span class="va">self</span>.msg <span class="op">=</span> Twist()</span>
<span id="cb3-29"><a></a>      <span class="va">self</span>.get_logger().error(<span class="st">"Estado desconocido"</span>)</span>
<span id="cb3-30"><a></a>  </span>
<span id="cb3-31"><a></a>  <span class="va">self</span>.pub.publish(<span class="va">self</span>.msg)</span></code></pre></div>
</div></div>
</section>
<section id="wall-follower-con-fsm-9" class="slide level2 smaller">
<h2><em>Wall-follower</em> con <em>fsm</em></h2>
<blockquote>
<p>Implementación</p>
</blockquote>
<ul>
<li>La función de transición depende solo de las mediciones del <em>LIDAR</em></li>
<li>Por lo tanto las transiciones se pueden implementar en el callback de <code>scan</code></li>
</ul>
<div class="sourceCode" id="cb4" data-code-line-numbers="|2-4|6-13|16-40" style="max-height: 45rem;"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb4-1"><a></a><span class="kw">def</span> sub_callback(<span class="va">self</span>, msg: LaserScan):</span>
<span id="cb4-2"><a></a>    <span class="co"># Convertir mediciones a vector de numpy</span></span>
<span id="cb4-3"><a></a>    <span class="co"># y acotar entre rango máximo y mínimo</span></span>
<span id="cb4-4"><a></a>    ranges <span class="op">=</span> np.clip(np.array(msg.ranges), msg.range_min, msg.range_max)</span>
<span id="cb4-5"><a></a>    </span>
<span id="cb4-6"><a></a>    <span class="co"># Segmentar por regiones</span></span>
<span id="cb4-7"><a></a>    regiones <span class="op">=</span> {</span>
<span id="cb4-8"><a></a>        <span class="st">'RIGHT'</span>:        np.<span class="bu">min</span>(ranges[ZONES[<span class="dv">2</span>]]),</span>
<span id="cb4-9"><a></a>        <span class="st">'FRONT_RIGHT'</span>:  np.<span class="bu">min</span>(ranges[ZONES[<span class="dv">3</span>]]),</span>
<span id="cb4-10"><a></a>        <span class="st">'FRONT'</span>:        np.<span class="bu">min</span>(ranges[ZONES[<span class="dv">4</span>]]),</span>
<span id="cb4-11"><a></a>        <span class="st">'FRONT_LEFT'</span>:   np.<span class="bu">min</span>(ranges[ZONES[<span class="dv">5</span>]]),</span>
<span id="cb4-12"><a></a>        <span class="st">'LEFT'</span>:         np.<span class="bu">min</span>(ranges[ZONES[<span class="dv">6</span>]]),</span>
<span id="cb4-13"><a></a>    }</span>
<span id="cb4-14"><a></a></span>
<span id="cb4-15"><a></a>    <span class="co">### TRANSICIONES</span></span>
<span id="cb4-16"><a></a>    _d <span class="op">=</span> <span class="va">self</span>.wall_distance</span>
<span id="cb4-17"><a></a>    <span class="cf">if</span> regiones[<span class="st">'FRONT'</span>] <span class="op">&gt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_LEFT'</span>] <span class="op">&gt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_RIGHT'</span>] <span class="op">&gt;</span> _d:</span>
<span id="cb4-18"><a></a>        <span class="co"># Ninguna pared detectada</span></span>
<span id="cb4-19"><a></a>        <span class="va">self</span>.cambiar_estado(<span class="dv">0</span>)</span>
<span id="cb4-20"><a></a>    <span class="cf">elif</span> regiones[<span class="st">'FRONT'</span>] <span class="op">&lt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_LEFT'</span>] <span class="op">&gt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_RIGHT'</span>] <span class="op">&gt;</span> _d:</span>
<span id="cb4-21"><a></a>        <span class="co"># Pared al frente</span></span>
<span id="cb4-22"><a></a>        <span class="va">self</span>.cambiar_estado(<span class="dv">1</span>)</span>
<span id="cb4-23"><a></a>    <span class="cf">elif</span> regiones[<span class="st">'FRONT'</span>] <span class="op">&gt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_LEFT'</span>] <span class="op">&lt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_RIGHT'</span>] <span class="op">&gt;</span> _d:</span>
<span id="cb4-24"><a></a>        <span class="co"># Pared a la izquierda</span></span>
<span id="cb4-25"><a></a>        <span class="va">self</span>.cambiar_estado(<span class="dv">0</span>)</span>
<span id="cb4-26"><a></a>    <span class="cf">elif</span> regiones[<span class="st">'FRONT'</span>] <span class="op">&gt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_LEFT'</span>] <span class="op">&gt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_RIGHT'</span>] <span class="op">&lt;</span> _d:</span>
<span id="cb4-27"><a></a>        <span class="co"># Pared a la derecha</span></span>
<span id="cb4-28"><a></a>        <span class="va">self</span>.cambiar_estado(<span class="dv">2</span>)</span>
<span id="cb4-29"><a></a>    <span class="cf">elif</span> regiones[<span class="st">'FRONT'</span>] <span class="op">&lt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_LEFT'</span>] <span class="op">&lt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_RIGHT'</span>] <span class="op">&gt;</span> _d:</span>
<span id="cb4-30"><a></a>        <span class="co"># Pared al frente e izquierda</span></span>
<span id="cb4-31"><a></a>        <span class="va">self</span>.cambiar_estado(<span class="dv">1</span>)</span>
<span id="cb4-32"><a></a>    <span class="cf">elif</span> regiones[<span class="st">'FRONT'</span>] <span class="op">&lt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_LEFT'</span>] <span class="op">&gt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_RIGHT'</span>] <span class="op">&lt;</span> _d:</span>
<span id="cb4-33"><a></a>        <span class="co"># Pared al frente y derecha</span></span>
<span id="cb4-34"><a></a>        <span class="va">self</span>.cambiar_estado(<span class="dv">1</span>)</span>
<span id="cb4-35"><a></a>    <span class="cf">elif</span> regiones[<span class="st">'FRONT'</span>] <span class="op">&lt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_LEFT'</span>] <span class="op">&lt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_RIGHT'</span>] <span class="op">&lt;</span> _d:</span>
<span id="cb4-36"><a></a>        <span class="co"># Frente, izquierda y derecha</span></span>
<span id="cb4-37"><a></a>        <span class="va">self</span>.cambiar_estado(<span class="dv">1</span>)</span>
<span id="cb4-38"><a></a>    <span class="cf">elif</span> regiones[<span class="st">'FRONT'</span>] <span class="op">&gt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_LEFT'</span>] <span class="op">&lt;</span> _d <span class="kw">and</span> regiones[<span class="st">'FRONT_RIGHT'</span>] <span class="op">&lt;</span> _d:</span>
<span id="cb4-39"><a></a>        <span class="co"># Solo izquierda y derecha</span></span>
<span id="cb4-40"><a></a>        <span class="va">self</span>.cambiar_estado(<span class="dv">0</span>)</span>
<span id="cb4-41"><a></a>    <span class="cf">else</span>:</span>
<span id="cb4-42"><a></a>        <span class="va">self</span>.get_logger().warning(<span class="st">"Caso desconocido"</span>)</span></code></pre></div>
</section></section>
<section>

<section id="aplicación-de-fsm-a-robótica-2" class="slide level2 smaller">
<h2>Aplicación de <em>fsm</em> a robótica</h2>
<blockquote>
<p><u>Ejemplo 3</u>: <em>Go-To-Point</em> con evasión de obstáculo</p>
</blockquote>
<div class="columns">
<div class="column">
<ul>
<li>Seguir el contorno de cada obstáculo en el camino hacia el objetivo <span class="math inline">\(\boldsymbol{G}\)</span></li>
<li>Algoritmo de evasión más simple</li>
<li>Conocido como <strong>Bug0</strong></li>
</ul>
</div><div class="column">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figure-bug0.webp" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
<!-- https://medium.com/@sefakurtipek/robot-motion-planning-bug-algorithms-34cf5175ab39 -->
</div></div>
</section>
<section id="ejemplo-3-bug0" class="slide level2 smaller">
<h2><u>Ejemplo 3</u>: <em>Bug0</em></h2>
<div class="columns">
<div class="column">
<h4 id="algoritmo-2">Algoritmo</h4>
<ul>
<li class="fragment"><u>Paso 1</u>: El camino al objetivo está libre?
<ul>
<li class="fragment">✔️ <em>Ir al objetivo</em></li>
<li class="fragment">❌ Continuar al paso 2</li>
</ul></li>
<li class="fragment"><u>Paso 2</u>: Hay un obstáculo para evadir?
<ul>
<li class="fragment">✔️ <em>Rodear obstáculo</em></li>
<li class="fragment">❌ Continuar al paso 1</li>
</ul></li>
</ul>
<div class="fragment">
<div class="callout callout-tip callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Se pueden combinar los dos algoritmos anteriores: <em>Go-To-Point</em> y <em>Wall-follower</em></p>
</div>
</div>
</div>
</div>
</div><div class="column">
<p><img data-src="bug0.svg"></p>
</div></div>
</section>
<section id="composición-de-fsm" class="slide level2 smaller">
<h2>Composición de <em>fsm</em></h2>
<ul>
<li><u>Desventaja de las <em>fsm</em></u>: La mayoría de sistemas reales el número de estados es grande (a veces infinito)</li>
<li>Problemas para representar directamente el gran espacio de estados</li>
</ul>
<p><br></p>
<blockquote>
<p><strong>Divide y vencerás</strong>: resolver un problema difícil, dividiéndolo en partes más simples</p>
</blockquote>
</section>
<section id="composición-de-fsm-1" class="slide level2 smaller">
<h2>Composición de <em>fsm</em></h2>
<blockquote>
<p>Diferentes tipos de composición:</p>
</blockquote>
<ul>
<li>Concurrente:
<ul>
<li>Según la reacción:
<ul>
<li>Sincrónica (o simultánea)</li>
<li>Asincrónica (o independiente)</li>
</ul></li>
<li>Según el orden:
<ul>
<li>Paralelo (<em>side-by-side</em>)</li>
<li>Serie (cascada)</li>
<li>Re-alimentación (<em>feedback</em>)</li>
</ul></li>
</ul></li>
<li><h4 id="jerárquica">Jerárquica</h4></li>
</ul>
</section>
<section id="composición-jerárquica-de-fsm" class="slide level2 smaller">
<h2>Composición jerárquica de <em>fsm</em></h2>
<blockquote>
<p>La idea principal es el <em>refinamiento</em> del estado (definición sencilla)</p>
</blockquote>

<img data-src="figure-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:30.0%"><div class="callout callout-caution callout-titled callout-style-simple">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Qué pasa si la máquina está en el estado <span class="math inline">\(C\)</span> y <span class="math inline">\(g_1\)</span> se activa al mismo tiempo que <span class="math inline">\(g_4\)</span>?</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="composición-jerárquica-de-fsm-1" class="slide level2 smaller">
<h2>Composición jerárquica de <em>fsm</em></h2>
<blockquote>
<p>Se evalúa la transición <em>más profunda</em> (o más refinada), luego la máquina de estado contenedor, luego su contenedora, y así sucesivamente</p>
</blockquote>
<ul>
<li>Ejemplo de composición jerárquica y su equivalente</li>
</ul>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figure-1.png" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figure-2.png" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="bug0-con-fsm-jerárquica" class="slide level2 smaller">
<h2><em>Bug0</em> con <em>fsm</em> jerárquica</h2>
<div class="columns">
<div class="column">
<blockquote>
<p><u>Ejemplo 3</u>: <em>Bug0</em></p>
</blockquote>
<h4 id="algoritmo-3">Algoritmo</h4>
<ul>
<li><u>Paso 1</u>: El camino al objetivo está libre?
<ul>
<li>✔️ <em>Ir al objetivo</em></li>
<li>❌ Continuar al paso 2</li>
</ul></li>
<li><u>Paso 2</u>: Hay un obstáculo para evadir?
<ul>
<li>✔️ <em>Rodear obstáculo</em></li>
<li>❌ Continuar al paso 1</li>
</ul></li>
</ul>
</div><div class="column">
<img data-src="index_files/mediabag/fsm-bug0.svg" style="width:100.0%">
</div></div>
</section>
<section id="bug0-con-fsm-jerárquica-1" class="slide level2 smaller">
<h2><em>Bug0</em> con <em>fsm</em> jerárquica</h2>
<div class="columns">
<div class="column" style="width:45%;">
<blockquote>
<p>Implementación</p>
</blockquote>
<ul>
<li>Se definen 2 estados independientes para <span class="math inline">\(\mathbf{M_1}\)</span> y <span class="math inline">\(\mathbf{M_2}\)</span>:
<ul>
<li><em>Go-to-point</em>: <code>g2p_state</code></li>
<li><em>Wall-follower</em>: <code>wf_state</code></li>
</ul></li>
<li>Se reutiliza el código de ambas <em>fsm</em></li>
<li>Se redefine la función de control y se predefinen los comandos de <code>Twist</code></li>
</ul>
</div><div class="column" style="width:55%;">
<div class="sourceCode" id="cb5" data-code-line-numbers="|4-5|5-11|12-19|20-21"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb5-1"><a></a><span class="kw">class</span> GoToPoint(Node):</span>
<span id="cb5-2"><a></a>  <span class="co">#...</span></span>
<span id="cb5-3"><a></a>  <span class="kw">def</span> timer_callback(<span class="va">self</span>):        </span>
<span id="cb5-4"><a></a>    <span class="cf">if</span> <span class="va">self</span>.wf_state <span class="op">==</span> <span class="dv">0</span> <span class="kw">and</span> <span class="va">self</span>.g2p_state <span class="op">!=</span> <span class="dv">3</span>:</span>
<span id="cb5-5"><a></a>      <span class="co"># Si no hay pared al frente</span></span>
<span id="cb5-6"><a></a>      <span class="cf">if</span> <span class="va">self</span>.g2p_state <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb5-7"><a></a>        <span class="va">self</span>.msg <span class="op">=</span> <span class="va">self</span>.corregir_curso_izq()</span>
<span id="cb5-8"><a></a>      <span class="cf">elif</span> <span class="va">self</span>.g2p_state <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb5-9"><a></a>        <span class="va">self</span>.msg <span class="op">=</span> <span class="va">self</span>.corregir_curso_der()</span>
<span id="cb5-10"><a></a>      <span class="cf">elif</span> <span class="va">self</span>.g2p_state <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb5-11"><a></a>        <span class="va">self</span>.msg <span class="op">=</span> <span class="va">self</span>.avanzar()</span>
<span id="cb5-12"><a></a>    <span class="cf">elif</span> <span class="va">self</span>.wf_state <span class="op">==</span> <span class="dv">1</span> <span class="kw">and</span> <span class="va">self</span>.g2p_state <span class="op">!=</span> <span class="dv">3</span>:</span>
<span id="cb5-13"><a></a>      <span class="co"># Si tiene una pared al frente y </span></span>
<span id="cb5-14"><a></a>      <span class="co">#   no llegó a destino</span></span>
<span id="cb5-15"><a></a>      <span class="va">self</span>.msg <span class="op">=</span> <span class="va">self</span>.girar_izq()</span>
<span id="cb5-16"><a></a>    <span class="cf">elif</span> <span class="va">self</span>.wf_state <span class="op">==</span> <span class="dv">2</span> <span class="kw">and</span> <span class="va">self</span>.g2p_state <span class="op">!=</span> <span class="dv">3</span>:</span>
<span id="cb5-17"><a></a>      <span class="co"># Si la pared está a la derecha y </span></span>
<span id="cb5-18"><a></a>      <span class="co">#   no llegó a destino</span></span>
<span id="cb5-19"><a></a>      <span class="va">self</span>.msg <span class="op">=</span> <span class="va">self</span>.seguir_obstáculo()</span>
<span id="cb5-20"><a></a>    <span class="cf">elif</span> <span class="va">self</span>.g2p_state <span class="op">==</span> <span class="dv">3</span>:</span>
<span id="cb5-21"><a></a>      <span class="va">self</span>.finalizar()</span>
<span id="cb5-22"><a></a>    <span class="cf">else</span>:</span>
<span id="cb5-23"><a></a>      <span class="va">self</span>.msg <span class="op">=</span> Twist()</span>
<span id="cb5-24"><a></a>      <span class="va">self</span>.get_logger().error(<span class="st">"Estado desconocido"</span>)</span>
<span id="cb5-25"><a></a>      <span class="cf">pass</span></span></code></pre></div>
</div></div>
</section>
<section id="bug0-con-fsm-jerárquica-2" class="slide level2 smaller">
<h2><em>Bug0</em> con <em>fsm</em> jerárquica</h2>
<blockquote>
<p><u>Problema</u>: Al ser un algoritmo básico tiene casos donde falla</p>
</blockquote>
<p><br></p>

<img data-src="bugtraps.svg" class="r-stretch"></section>
<section id="alternativa-a-bug0-bug1" class="slide level2 smaller">
<h2>Alternativa a <em>Bug0</em>: <em>Bug1</em></h2>
<blockquote>
<p><u>Ejemplo 4</u>: algoritmo <em>Bug1</em></p>
</blockquote>
<div class="columns">
<div class="column">
<ul>
<li>Al encontrar un obstáculo, guardar la posición actual <span class="math inline">\(H\)</span> y la distancia al objetivo <span class="math inline">\(d_H\)</span></li>
<li>Rodear completamente el obstáculo hasta volver a <span class="math inline">\(H\)</span> obteniendo el punto de menor distancia al objetivo <span class="math inline">\(L\)</span> tal que <span class="math inline">\(d_L \leq d_H\)</span></li>
<li>Dirigirse nuevamente a <span class="math inline">\(L\)</span> rodeando el objetivo, corregir el curso y continuar al objetivo</li>
</ul>
<div class="fragment">
<div class="callout callout-tip callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Algoritmo ineficiente pero eficaz</p>
</div>
</div>
</div>
</div>
</div><div class="column">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figure-bug1.webp" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div></div>
</section></section>
<section>

<section id="alternativa-a-bug1-bug2" class="slide level2 smaller">
<h2>Alternativa a <em>Bug1</em>: <em>Bug2</em></h2>
<blockquote>
<p><u>Ejemplo 5</u>: algoritmo <em>Bug2</em></p>
</blockquote>
<div class="columns">
<div class="column">
<ul>
<li>Se traza una recta entre el punto inicial y el objetivo</li>
<li>Avanzar por la recta hasta que:
<ul>
<li>Se alcance el objetivo (Fin)</li>
<li>Se encuentra un obstáculo</li>
</ul></li>
<li>Seguir el contorno del objeto hasta que:
<ul>
<li>Se alcance el objetivo (Fin)</li>
<li>Se cruza la recta en un punto a menor distancia que la del punto de contacto (vuelve al paso anterior)</li>
</ul></li>
</ul>
</div><div class="column">
<p><br></p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="bug2.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div></div>
</section>
<section id="ejemplo-5-bug2" class="slide level2 smaller">
<h2><u>Ejemplo 5</u>: <em>Bug2</em></h2>
<div class="columns">
<div class="column">
<h4 id="algoritmo-4">Algoritmo</h4>
<!-- - [Paso 0]{.underline}: Se alcanzó el objetivo?
  - ✔️ Finalizar
  - ❌ Continuar al paso 2 -->
<ul>
<li class="fragment"><u>Paso 1</u>: El camino al objetivo está libre?
<ul>
<li class="fragment">✔️ Girar al objetivo y avanzar</li>
<li class="fragment">❌ Continuar al paso 2</li>
</ul></li>
<li class="fragment"><u>Paso 2</u>: Guardar la posición y rodear el obstáculo hacia la izquierda</li>
<li class="fragment"><u>Paso 3</u>: La posición actual cruza la recta?
<ul>
<li class="fragment">✔️ Si la distancia al objetivo es menor, volver al paso 1</li>
<li class="fragment">❌ El objetivo no puede alcanzarse</li>
</ul></li>
</ul>
</div><div class="column">
<p><br></p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="bug2.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div></div>
</section>
<section id="bug2-con-fsm" class="slide level2 smaller">
<h2><em>Bug2</em> con <em>fsm</em></h2>
<blockquote>
<p>Identificar los <em>componentes</em> de la máquina</p>
</blockquote>
<ul>
<li class="fragment">Estados: <span class="math inline">\(S = \left\{ \textrm{GirarAlObjetivo}, \textrm{Avanzar}, \textrm{RodearObstaculo} \right\}\)</span></li>
<li class="fragment">Entradas: <span class="math inline">\(\Sigma = \left\{ \boldsymbol{P}, \theta \right\} + \left\{  R_\textrm{F}, R_\textrm{FL}, R_\textrm{FR} \right\}\)</span></li>
<li class="fragment">Salidas: <span class="math inline">\(\Gamma = \left\{ \nu, \omega \right\}\)</span></li>
<li class="fragment">Parámetro: <span class="math inline">\(\boldsymbol{G}, d = \textrm{DistanciaPared}\)</span></li>
<li class="fragment">Variable: <span class="math inline">\(\gamma = \textrm{CursoAlObjetivo}, \boldsymbol{H} = \textrm{PuntoContacto}, \boldsymbol{P}_0 = \textrm{Posición inicial}\)</span></li>
<li class="fragment">Estado inicial: <span class="math inline">\(s_0 = \textrm{GirarAlObjetivo}\)</span></li>
</ul>
</section>
<section id="bug2-con-fsm-1" class="slide level2 smaller">
<h2><em>Bug2</em> con <em>fsm</em></h2>
<blockquote>
<p>Tabla de transición</p>
</blockquote>
<div class="fragment">
<table class="table-hover table-bordered caption-top">
<colgroup>
<col style="width: 13%">
<col style="width: 17%">
<col style="width: 17%">
<col style="width: 17%">
<col style="width: 17%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;"><span class="math inline">\(\gamma \not\approx 0\)</span></th>
<th style="text-align: center;"><span class="math inline">\(\gamma \approx 0\)</span></th>
<th style="text-align: center;"><span class="math inline">\(\lVert \boldsymbol{P} - \boldsymbol{G} \rVert \approx 0\)</span></th>
<th style="text-align: center;"><span class="math inline">\(R_\textrm{F} &lt; d\)</span> <span class="math display">\[\small \begin{cases}R_\textrm{F} &gt; d \\ R_\textrm{FL} &gt; d \\ R_\textrm{FR} &lt; d\end{cases}\]</span></th>
<th style="text-align: center;"><span class="math inline">\(\boldsymbol{P} \in \overline{\boldsymbol{P}_0 \boldsymbol{G}}\)</span> <span class="math inline">\(\lVert \boldsymbol{P} - \boldsymbol{G} \rVert &lt; \lVert \boldsymbol{H} - \boldsymbol{G} \rVert\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Girar al objetivo</strong></td>
<td style="text-align: center;">Girar al objetivo</td>
<td style="text-align: center;">Avanzar</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Avanzar</strong></td>
<td style="text-align: center;">Girar al objetivo</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Finalizar</td>
<td style="text-align: center;">Rodear obstáculo<br><span class="math inline">\(\boldsymbol{H}:=\boldsymbol{P}\)</span></td>
<td style="text-align: center;">-</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Rodear obstáculo</strong></td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">Finalizar</td>
<td style="text-align: center;">Rodear obstáculo</td>
<td style="text-align: center;">Girar al objetivo</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="bug2-con-fsm-2" class="slide level2 smaller">
<h2><em>Bug2</em> con <em>fsm</em></h2>
<blockquote>
<p>Máquina de estado</p>
</blockquote>
<div class="columns">
<div class="column" style="width:15%;">
<p><br></p>
</div><div class="column" style="width:70%;">
<img data-src="index_files/mediabag/fsm-bug2.svg" style="width:80.0%">
</div></div>
</section></section>
<section>

<section id="laboratorio-1" class="slide level2 center">
<h2><a href="../../clases/19/lab.html">Laboratorio</a></h2>
<p>Implementación <em>Bug2</em> con <em>fsm</em></p>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p>Robótica - TUAR - FICH - UNL</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/acapovilla\.github\.io\/robotica-2025\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>